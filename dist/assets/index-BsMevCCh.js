import{r as j,u as Y,j as e,A as _e,ae as fe,I as ye,af as je,L as oe,d as Q,e as H,f as J,g as be,h as M,s as F,i as we,k as z,l as _,m as Se,ag as le,ah as Ee,ai as Ne,aj as Ce,ak as Re,t as ke,Q as G,al as $e,q as ce,am as de,an as De,ao as Te,ap as he,X as me,aq as Ie,ar as Oe,x as ue,y as T,as as Ve,at as Le,au as qe,av as Pe,K as Me,a6 as Fe}from"./index-BOHQm4U7.js";import{C as I,g as Ae,D as ge,I as f}from"./index-DFrqTY6r.js";const ve=j.createContext(),pe=()=>j.useContext(ve),He=({children:m})=>{const s=Y(),[t,a]=j.useState([{text:"Dashboard",path:"/organiser",icon:e.jsx(_e,{})},{text:"Events",path:"/organiser/events",icon:e.jsx(fe,{}),sublinks:[{text:"Add Event",path:"/organiser/events/create"},{text:"Event Details",path:"/organiser/events/details"}]},{text:"Notifications",path:"/organiser/notifications",icon:e.jsx(ye,{})},{text:"QR Scanner",path:"/organiser/scanner",icon:e.jsx(je,{})}]),[i,o]=j.useState("/");j.useEffect(()=>{const l=t.map(h=>{if(h.sublinks){let c=!1;const d=h.sublinks.map(r=>r.path===s.pathname?(c=!0,{...r,active:!0}):{...r,active:!1});return h.path===s.pathname||c?{...h,active:!0,sublinks:d}:{...h,active:!1,sublinks:d}}return h.path===s.pathname?{...h,active:!0}:{...h,active:!1}});a(l),o(s.pathname)},[s.pathname]);const g={links:t,activeLink:i};return e.jsx(ve.Provider,{value:g,children:m})},We="_layout_1br57_3",Be="_content_1br57_12",ne={layout:We,content:Be},Ue="_sidebar_6b379_1",Qe="_links_6b379_16",ze="_navlinks_6b379_22",Ge="_sublinks_6b379_32",Ye="_navlink_6b379_22",Je="_active_6b379_63",D={sidebar:Ue,links:Qe,navlinks:ze,sublinks:Ge,navlink:Ye,active:Je},Ke=()=>{const{links:m}=pe();return e.jsxs("div",{className:D.sidebar,children:[e.jsx("div",{className:D.header,children:e.jsx(oe,{light:!1})}),e.jsx("div",{className:D.links,children:e.jsx("ul",{className:D.navlinks,children:m==null?void 0:m.map(s=>e.jsxs(Q.Fragment,{children:[e.jsx("li",{children:e.jsxs(H,{to:s.path,className:D.navlink+" "+(s.active?D.active:""),children:[e.jsx("span",{className:D.icon,children:s.icon}),e.jsx("span",{children:s.text})]})}),s.active&&s.sublinks&&e.jsx("ul",{className:D.sublinks,children:s.sublinks.map(t=>e.jsx("li",{children:e.jsxs(H,{to:t.path,className:D.navlink+" "+(t.active?D.active:""),children:[e.jsx("span",{className:D.icon,children:t.icon}),e.jsx("span",{children:t.text})]})},t.text))})]},s.text))})})]})},Xe="_wrapper_27eqx_1",Ze="_navbar_27eqx_10",et="_left_27eqx_21",tt="_title_27eqx_26",st="_right_27eqx_32",at="_navlinks_27eqx_37",it="_sublinks_27eqx_45",nt="_navlink_27eqx_37",rt="_active_27eqx_74",ot="_login_27eqx_83",lt="_avatar_27eqx_122",ct="_hamburger_27eqx_129",dt="_line_27eqx_134",ht="_open_27eqx_154",mt="_drawer_27eqx_166",ut="_icon_27eqx_194",E={wrapper:Xe,navbar:Ze,left:et,title:tt,right:st,navlinks:at,sublinks:it,navlink:nt,active:rt,login:ot,avatar:lt,hamburger:ct,line:dt,open:ht,drawer:mt,icon:ut},gt=()=>{const m=Y(),s=J(),t=be("(orientation: portrait)"),[a,i]=j.useState(!1),{links:o}=pe(),g=M(F),l=h=>{h.preventDefault(),s(-1)};return e.jsx("div",{className:E.wrapper,children:e.jsxs("div",{className:E.navbar,children:[e.jsxs("div",{className:E.left,children:[t?m.pathname.split("/").length>3?e.jsx(we,{className:E.back,size:24,onClick:l,style:{marginLeft:"-0.5rem",marginRight:"1rem"}}):e.jsxs("div",{className:E.hamburger+" "+(a?E.open:""),onClick:()=>i(!a),children:[e.jsx("div",{className:E.line}),e.jsx("div",{className:E.line}),e.jsx("div",{className:E.line})]}):"",t&&e.jsx(oe,{light:!1})]}),e.jsxs("div",{className:E.right,children:[e.jsx("div",{className:(t?E.drawer:"")+" "+(a?E.open:""),children:e.jsx("ul",{className:E.navlinks,children:o==null?void 0:o.map(h=>e.jsxs(Q.Fragment,{children:[e.jsx("li",{children:e.jsxs(H,{to:h.path,className:E.navlink+" "+(h.active?E.active:""),onClick:()=>i(!1),children:[t&&e.jsx("span",{className:E.icon,children:h.icon}),h.text]})},h.text),h.active&&h.sublinks&&e.jsx("ul",{className:E.sublinks,children:h.sublinks.map(c=>e.jsx("li",{children:e.jsxs(H,{to:c.path,className:E.navlink+" "+(c.active?E.active:""),onClick:()=>i(!1),children:[t&&e.jsx("span",{className:E.icon,children:c.icon}),c.text]})},c.text))})]},h.text))})}),g&&e.jsx(H,{to:"/profile",children:e.jsx("span",{children:g.name})})]})]})})},vt="_page_o6tu6_1",pt="_greeting_o6tu6_6",xt="_left_o6tu6_16",_t="_title_o6tu6_25",ft="_subtitle_o6tu6_37",yt="_right_o6tu6_45",jt="_image_o6tu6_52",L={page:vt,greeting:pt,left:xt,title:_t,subtitle:ft,right:yt,image:jt},bt=()=>{const m=M(F);return e.jsx("div",{className:L.page,children:e.jsx(z,{columns:12,children:e.jsx(_,{sm:12,md:12,lg:12,children:e.jsx(I,{children:e.jsxs("div",{className:L.greeting,children:[e.jsxs("div",{className:L.left,children:[e.jsxs("div",{className:L.title,children:[Se(),", ",e.jsx("span",{children:m.name})]}),e.jsx("div",{className:L.subtitle,children:"Have a nice day at work"})]}),e.jsx("div",{className:L.right,children:e.jsx("div",{className:L.image,children:e.jsx("img",{src:Ae,alt:"greeting"})})})]})})})})})},wt="_page_9ok6s_1",St="_container_9ok6s_6",Et="_actions_9ok6s_13",Nt="_action_9ok6s_13",Ct="_title_9ok6s_33",Rt="_subtitle_9ok6s_39",kt="_error_9ok6s_46",$t="_loading_9ok6s_53",Dt="_eventCard_9ok6s_60",Tt="_submit_9ok6s_67",It="_selectEvent_9ok6s_88",Ot="_details_9ok6s_106",Vt="_detail_9ok6s_106",p={page:wt,container:St,actions:Et,action:Nt,title:Ct,subtitle:Rt,error:kt,loading:$t,eventCard:Dt,submit:Tt,selectEvent:It,details:Ot,detail:Vt},Lt=()=>{const{organisation:m}=M(F),{data:{events:s}={},error:t,isLoading:a}=le(m),[i]=Ee(),o=J(),g=c=>{o(`/organiser/events/edit/${c}`)},l=c=>{window.confirm("Are you sure you want to delete this event?")&&i(c)},h=c=>{o(`/organiser/events/details/${c}`)};return a?e.jsx("div",{children:"Loading..."}):t?e.jsx("div",{children:JSON.stringify(t)}):e.jsx("div",{className:p.page,children:e.jsx(I,{children:e.jsx(ge,{columns:[{label:"ID",key:"_id"},{label:"Name",key:"name"},{label:"Type",key:"type"},{label:"Venue",key:"venue"},{label:"Summary",key:"summary"}],title:"Events",data:s,selectedColumns:["name","type","venue","summary"],actions:{edit:g,delete:l,details:h}})})})},qt="_container_1sn5c_1",Pt="_label_1sn5c_7",Mt="_list_1sn5c_13",Ft="_item_1sn5c_19",At="_fadeIn_1sn5c_1",Ht="_remove_1sn5c_29",Wt="_add_1sn5c_62",Bt="_error_1sn5c_81",Ut="_fadeOut_1sn5c_1",q={container:qt,label:Pt,list:Mt,item:Ft,fadeIn:At,remove:Ht,add:Wt,error:Bt,fadeOut:Ut},Qt=({children:m,label:s,validations:t,onChange:a,onValidation:i,defaultValue:o})=>{Array.isArray(m)||(m=[m]);const[g,l]=j.useState(""),[h,c]=j.useState([]),[d,r]=j.useState([]);j.useEffect(()=>{o?(c(o.map(x=>m)),r(o)):(c([m]),r([{...m.reduce((x,b)=>({...x,[b.props.name]:""}),{})}]))},[]);const n=()=>{let x=!0;return t!=null&&t.required&&h.length===0?(l(`${s} is required`),x=!1):t!=null&&t.minLength&&h.length<t.minLength?(l(`${s} must be at least ${t.minLength} items`),x=!1):t!=null&&t.maxLength&&h.length>t.maxLength&&(l(`${s} must be at most ${t.maxLength} items`),x=!1),i&&i(x),x&&l(""),x},u=x=>{x.preventDefault(),c(b=>[...b,m]),r(b=>{const w=m.map(C=>C.props.name);return[...b,{...w.reduce((C,k)=>({...C,[k]:""}),{})}]})},S=(x,b)=>{x.preventDefault(),c(w=>{const R=[...w];return R.splice(b,1),R}),r(w=>{const R=[...w];return R.splice(b,1),R})};return j.useEffect(()=>{n(),a&&a(d)},[d]),e.jsxs("div",{className:q.container,children:[e.jsx("h5",{className:q.label,children:s}),e.jsx("div",{className:q.list,onBlur:n,children:h.map((x,b)=>e.jsxs("div",{className:q.item,children:[Array.from(x).map((w,R)=>Q.cloneElement(w,{key:R,...w.props,defaultValue:d[b][w.props.name],onChange:C=>{const k=[...h];k[b]=Array.from(x).map((P,W)=>Q.cloneElement(P,{key:W,...P.props,value:C[P.props.name]})),c(k);const A=[...d];A[b]={...d[b],[w.props.name]:C},r(A),a&&a(A)},onValidation:C=>{i&&i(C)}})),e.jsxs("button",{className:q.remove,onClick:w=>S(w,b),children:[e.jsx(Ne,{}),e.jsx("span",{children:"Remove"})]})]},b))}),g&&e.jsx("p",{className:q.error,children:g}),e.jsxs("button",{className:q.add,onClick:u,children:["Add ",s," Item"]})]})},zt="_container_1kup4_1",Gt="_image_1kup4_10",Yt="_blur_1kup4_42",Jt="_error_1kup4_68",B={container:zt,image:Gt,blur:Yt,error:Jt},Kt=({src:m,blurHash:s=!0,onHashChange:t})=>{const[a,i]=j.useState(null),[o,g]=j.useState(null),l=r=>new Promise(n=>{const u=new Image;u.crossOrigin="anonymous",u.src=r,u.onload=()=>n(u),u.onerror=S=>g(S)}),h=async r=>{const n=await l(r),u=document.createElement("canvas");u.width=n.width,u.height=n.height;const S=u.getContext("2d"),x=n.width/n.height;return S.drawImage(n,0,0,100,Math.floor(100/x)),S.getImageData(0,0,100,Math.floor(100/x))},c=async r=>{const n=await h(r),u=n.width/n.height;return Re(n.data,100,Math.floor(100/u),9,9)},d=async r=>await c(r);return j.useEffect(()=>{if(m){console.log("hashing");try{d(m).then(r=>{i(r),typeof t=="function"&&t(r),console.log("hashed")})}catch(r){g(r)}}},[m]),m?e.jsxs("div",{className:B.container,children:[e.jsx("div",{className:B.image,children:m&&e.jsx("img",{src:m,alt:"preview"})}),s&&a&&e.jsx(Ce,{hash:a,style:{height:"100%",width:"100px",borderRadius:"0.5rem",overflow:"hidden"},punch:1,className:B.blur}),o&&e.jsx("div",{className:B.error,children:(o==null?void 0:o.message)||"Something went wrong while blurring image..."})]}):null},xe=({onSubmit:m,defaultValue:s,onChange:t})=>{const i=M(F).organisation,[o,g]=j.useState(!1),[l,h]=j.useState({name:"",type:"",venue:"",summary:"",description:"",image:"",organisation:i,startTime:"",endTime:"",timeline:[],category:"other",tags:[],rulebookUrl:"",isRegistrationRequired:!1,registrationFeesInINR:0,minTeamSize:1,maxTeamSize:1,registrationsStart:"",registrationsEnd:"",isEntryPassRequired:!1,entryPassPriceInINR:0,totalEntryPasses:0,entryPassDistributionStart:"",entryPassDistributionEnd:"",...s||{}}),c=(n,u)=>{h({...l,[n]:u}),t&&t({...l,[n]:u})},d=n=>{g(n)},r=n=>{n.preventDefault(),console.log(l),o&&m(l)};return e.jsx("form",{onSubmit:r,children:e.jsxs(z,{columns:12,children:[e.jsx(_,{sm:12,md:6,lg:4,children:e.jsx(f.Text,{label:"Name",validations:{required:!0},onValidation:d,onChange:n=>c("name",n),defaultValue:l.name})}),e.jsx(_,{sm:12,md:6,lg:4,children:e.jsx(f.Dropdown,{label:"Type",entries:["event","competition","exhibition","workshop","other"],validations:{required:!0},onValidation:d,onChange:n=>c("type",n),defaultValue:l.type})}),e.jsx(_,{sm:12,md:6,lg:4,children:e.jsx(f.Text,{label:"Venue",validations:{required:!0},onValidation:d,onChange:n=>c("venue",n),defaultValue:l.venue})}),e.jsx(_,{sm:12,md:12,lg:8,children:e.jsx(f.Text,{label:"Summary",validations:{required:!0},onValidation:d,onChange:n=>c("summary",n),defaultValue:l.summary})}),e.jsx(_,{sm:12,md:12,lg:12,children:e.jsx(f.TextArea,{label:"Description",validations:{required:!0},onValidation:d,onChange:n=>c("description",n),defaultValue:l.description})}),e.jsxs(_,{sm:12,md:6,lg:4,children:[e.jsx(f.Text,{label:"Image URL",validations:{required:!0},onValidation:d,onChange:n=>c("image",n),defaultValue:l.image}),e.jsx(Kt,{src:l.image,blurHash:l.imageBlurHash,onHashChange:n=>c("imageBlurHash",n)})]}),e.jsx(_,{sm:12,md:6,lg:4,children:e.jsx(f.Text,{label:"Rulebook URL",validations:{},onValidation:d,onChange:n=>c("rulebookUrl",n),defaultValue:l.rulebookUrl})}),e.jsx(_,{sm:12,md:6,lg:4,children:e.jsx(f.Text,{label:"Organisation ID",readOnly:!0,defaultValue:i})}),e.jsx(_,{sm:12,md:4,lg:4,children:e.jsx(f.Dropdown,{label:"Category",entries:["design","management","technical","literary","art","dramatics","dance","music","quiz","gaming","workshop","other"],validations:{required:!0},onValidation:d,onChange:n=>c("category",n),defaultValue:l.category||"other"})}),e.jsx(_,{sm:12,md:8,lg:4,children:e.jsx(f.Tags,{label:"Tags",validations:{required:!0},onValidation:d,onChange:n=>c("tags",n),defaultValue:l.tags},l.tags)}),e.jsx(_,{sm:12,md:6,lg:4,children:e.jsx(f.DateTime,{label:"Start Time",validations:{required:!0},onValidation:d,onChange:n=>c("startTime",n),defaultValue:l.startTime})}),e.jsx(_,{sm:12,md:6,lg:4,children:e.jsx(f.DateTime,{label:"End Time",validations:{required:!0},onValidation:d,onChange:n=>c("endTime",n),defaultValue:l.endTime})}),e.jsx(_,{sm:12,md:12,lg:12,children:e.jsxs(Qt,{label:"Timeline",name:"timeline",validations:{required:!0},onValidation:d,onChange:n=>c("timeline",n),defaultValue:l.timeline,children:[e.jsx(f.DateTime,{label:"Date Time",name:"time",validations:{required:!0}}),e.jsx(f.Text,{label:"Venue",name:"venue",validations:{required:!0}}),e.jsx(f.TextArea,{label:"Description",name:"description",validations:{required:!0}})]})}),e.jsx(_,{sm:12,md:4,lg:4,children:e.jsx(f.Radio,{label:"Is Registration Required?",entries:["Yes","No"],onChange:n=>c("isRegistrationRequired",n==="Yes"),defaultValue:l.isRegistrationRequired?"Yes":"No"})}),e.jsx(_,{sm:12,md:4,lg:4,children:e.jsx(f.DateTime,{label:"Registrations Start Time",validations:{required:l.isRegistrationRequired},onValidation:d,onChange:n=>c("registrationsStart",n),defaultValue:l.registrationsStart})}),e.jsx(_,{sm:12,md:4,lg:4,children:e.jsx(f.DateTime,{label:"Registrations End Time",validations:{required:l.isRegistrationRequired},onValidation:d,onChange:n=>c("registrationsEnd",n),defaultValue:l.registrationsEnd})}),e.jsx(_,{sm:12,md:4,lg:4,children:e.jsx(f.Text,{type:"number",label:"Registration Fees (in INR)",validations:{required:l.isRegistrationRequired},onValidation:d,onChange:n=>c("registrationFeesInINR",n),defaultValue:l.fee||0})}),e.jsx(_,{sm:12,md:4,lg:4,children:e.jsx(f.Text,{type:"number",label:"Minimum Team Size",validations:{required:l.isRegistrationRequired},onValidation:d,onChange:n=>c("minTeamSize",n),defaultValue:l.minTeamSize||1})}),e.jsx(_,{sm:12,md:4,lg:4,children:e.jsx(f.Text,{type:"number",label:"Maximum Team Size",validations:{required:l.isRegistrationRequired},onValidation:d,onChange:n=>c("maxTeamSize",n),defaultValue:l.maxTeamSize||1})}),e.jsx(_,{sm:12,md:4,lg:4,children:e.jsx(f.Radio,{label:"Is Entry Pass Required?",entries:["Yes","No"],onChange:n=>c("isEntryPassRequired",n==="Yes"),defaultValue:l.isEntryPassRequired?"Yes":"No"})}),e.jsx(_,{sm:12,md:4,lg:4,children:e.jsx(f.DateTime,{label:"Entry Pass Distribution Start",validations:{required:l.isEntryPassRequired},onValidation:d,onChange:n=>c("entryPassDistributionStart",n),defaultValue:l.entryPassDistributionStart})}),e.jsx(_,{sm:12,md:4,lg:4,children:e.jsx(f.DateTime,{label:"Entry Pass Distribution End",validations:{required:l.isEntryPassRequired},onValidation:d,onChange:n=>c("entryPassDistributionEnd",n),defaultValue:l.entryPassDistributionEnd})}),e.jsx(_,{sm:12,md:4,lg:4,children:e.jsx(f.Text,{type:"number",label:"Entry Pass Price (in INR)",validations:{required:l.isEntryPassRequired},onValidation:d,onChange:n=>c("entryPassPriceInINR",n),defaultValue:l.entryPassPriceInINR||0})}),e.jsx(_,{sm:12,md:4,lg:4,children:e.jsx(f.Text,{type:"number",label:"Total Entry Passes",validations:{required:l.isEntryPassRequired},onValidation:d,onChange:n=>c("totalEntryPasses",n),defaultValue:l.totalEntryPasses||0})}),e.jsx(_,{sm:12,md:12,lg:12,children:e.jsx("button",{className:p.submit,type:"submit",children:"Submit"})})]})})},O={success:m=>G.success(m),error:m=>G.error(m),promise:(m,s)=>G.promise(m,s)},Xt=({children:m})=>e.jsxs(e.Fragment,{children:[m,e.jsx(ke,{})]}),Zt=()=>{var c;const s=M(F).organisation,[t,a]=j.useState({organisation:s,timeline:[]}),[i,{error:o,isSuccess:g,isLoading:l}]=$e(),h=()=>{O.promise(i(t),{loading:"Creating event...",success:"Event created successfully!",error:"Error creating event."})};return j.useEffect(()=>{g&&a({organisation:s,timeline:[]})},[g,s]),e.jsxs("div",{className:p.page,children:[e.jsx(I,{children:e.jsxs("div",{className:p.eventCard,children:[e.jsx("h4",{className:p.title,children:"Event Details"}),e.jsxs("p",{className:p.subtitle,children:["Enter the details of the event you want to create.",o&&e.jsx("p",{className:p.error,children:(c=o==null?void 0:o.data)==null?void 0:c.message})]}),e.jsx(xe,{defaultValue:t,onSubmit:h,onChange:d=>a(d)})]})}),e.jsx(ce,{isLoading:l,fullScreen:!0})]})},es=()=>{var l;const s=Y().pathname.split("/").pop(),{data:{event:t}={},isLoading:a}=de(s),[i,{error:o}]=De(),g=h=>{var c;O.promise(i(h).unwrap(),{pending:"Updating event...",success:"Event updated successfully!",error:((c=o==null?void 0:o.data)==null?void 0:c.message)||(o==null?void 0:o.message)||"Something went wrong"})};return e.jsxs("div",{className:p.page,children:[e.jsx(I,{children:e.jsxs("div",{className:p.eventCard,children:[e.jsx("h4",{className:p.title,children:"Event Details"}),e.jsxs("p",{className:p.subtitle,children:["Enter the details of the event you want to edit.",o&&e.jsx("p",{className:p.error,children:(l=o==null?void 0:o.data)==null?void 0:l.message})]}),e.jsx(xe,{defaultValue:t,onSubmit:g},t==null?void 0:t._id)]})}),e.jsx(ce,{isLoading:a,fullScreen:!0})]})},ts=({eventId:m})=>{const{data:{event:s}={},isLoading:t,error:a}=de(m);return t?e.jsx("p",{className:p.loading,children:"Loading..."}):a?e.jsx("p",{className:p.error,children:JSON.stringify(a)}):e.jsx("div",{className:p.details,children:Object.entries(s).map(([i,o])=>e.jsxs("p",{className:p.detail,children:[i,e.jsx("span",{children:typeof o=="string"?o:JSON.stringify(o)})]},i))})},ss="_tabsContainer_1dkfd_1",as="_tabs_1dkfd_1",is="_tab_1dkfd_1",ns="_active_1dkfd_28",U={tabsContainer:ss,tabs:as,tab:is,active:ns},rs=({tabs:m,activeIndex:s,onTabChange:t})=>{if(!m||m.length<1)throw new Error("Tabs must have at least one item");return e.jsx("div",{className:U.tabsContainer,children:e.jsx("div",{className:U.tabs,children:m.map((a,i)=>e.jsx("div",{className:U.tab+" "+(i===s?U.active:""),onClick:()=>t(i),children:a.label},a.label||a.name))})})},os=({eventId:m})=>{const{data:{participations:s}={}}=Te(m),t=[{label:"Registered At",key:"createdAt",modifier:a=>he(a)},{label:"Leader",key:"leader",modifier:a=>a.name},{label:"Contact Email",key:"leader",modifier:a=>a.email},{label:"Members Count",key:"members",modifier:a=>a.length}];return e.jsx(ge,{title:"Participants",columns:t,data:s,getRowId:a=>a._id})},ls=({defaultValue:m})=>{const{eventId:s}=me(),[t,a]=j.useState(m||{title:"",description:""}),[i,{}]=Ie(),[o,g]=j.useState(!1),l=(d,r)=>{a({...t,[d]:r})},h=d=>{g(d)},c=async d=>{if(d.preventDefault(),!!o)try{await i({announcement:t,eventId:s}).unwrap(),a({title:"",description:""}),O.success("Announcement posted successfully!")}catch(r){O.error(r.data.message||r.error.message||"Something went wrong")}};return e.jsxs("form",{className:p.announcement,onSubmit:c,children:[e.jsxs(z,{columns:12,children:[e.jsx(_,{sm:12,md:6,lg:4,children:e.jsx(f.Text,{label:"Title",placeholder:"Add a title...",validations:{required:!0},onValidation:h,defaultValue:t.title,onChange:d=>l("title",d)})}),e.jsx(_,{sm:12,md:12,lg:12,children:e.jsx(f.TextArea,{label:"Description",placeholder:"Add a description...",validations:{required:!0},onValidation:h,defaultValue:t.description,onChange:d=>l("description",d)})})]}),e.jsx("div",{className:p.actions,children:e.jsx("button",{className:p.submit,type:"submit",children:"Post"})})]})},re=()=>{const{eventId:m}=me(),{organisation:s}=M(F),[t,a]=j.useState(0),{data:{events:i}={},isLoading:o,error:g}=le(s),l=J(),h=[{label:"Details",component:e.jsx(I,{children:e.jsxs("div",{className:p.eventCard,children:[e.jsx("h4",{className:p.title,children:"Event Details"}),e.jsx("p",{className:p.subtitle,children:"Here you can see the details of the event."}),e.jsx(ts,{eventId:m})]})})},{label:"Participants",component:e.jsx(I,{children:e.jsx("div",{className:p.eventCard,children:e.jsx(os,{eventId:m})})})},{label:"Statistics",component:e.jsx(I,{children:e.jsxs("div",{className:p.eventCard,children:[e.jsx("h4",{className:p.title,children:"Event Statistics"}),e.jsx("p",{className:p.subtitle,children:"Here you can see the statistics of the event."})]})})},{label:"Announcements",component:e.jsx(I,{children:e.jsxs("div",{className:p.eventCard,children:[e.jsx("h4",{className:p.title,children:"Announcements"}),e.jsx("p",{className:p.subtitle,children:"Here you can post announcements regarding the event."}),e.jsx(ls,{defaultValue:{title:"",description:""}})]})})}],c=d=>{const r=d.target.value;r&&Oe(()=>{l(`/organiser/events/details/${r}`)})};return o?e.jsx("div",{children:"Loading..."}):g?e.jsx("div",{children:JSON.stringify(g)}):e.jsx("div",{className:p.page,children:e.jsxs("div",{className:p.container,children:[o&&e.jsx("p",{className:p.loading,children:"Loading..."}),g&&e.jsx("p",{className:p.error,children:JSON.stringify(g)}),i&&!i.length&&e.jsx("select",{className:p.selectEvent,children:e.jsx("option",{children:"No events found"})}),i&&i.length&&e.jsxs("select",{className:p.selectEvent,value:m||"",onChange:c,children:[e.jsx("option",{value:"",children:"Select an event"}),i.map(d=>e.jsx("option",{value:d._id,children:d.name},d._id))]}),m&&e.jsxs(e.Fragment,{children:[e.jsx(rs,{tabs:h,activeIndex:t,onTabChange:d=>a(d)}),h[t].component]})]})})},cs=()=>e.jsxs(ue,{children:[e.jsx(T,{path:"/",element:e.jsx(Lt,{})}),e.jsx(T,{path:"/create",element:e.jsx(Zt,{})}),e.jsx(T,{path:"/edit/:id",element:e.jsx(es,{})}),e.jsx(T,{path:"/details",element:e.jsx(re,{}),children:e.jsx(T,{path:":eventId",element:e.jsx(re,{})})})]}),ds="_container_f7id4_1",hs="_scanner_f7id4_11",ms="_overlay_f7id4_19",us="_corners_f7id4_28",gs="_result_f7id4_65",vs="_details_f7id4_77",ps="_used_f7id4_83",xs="_item_f7id4_91",_s="_key_f7id4_98",fs="_value_f7id4_104",ys="_actions_f7id4_110",js="_error_f7id4_138",bs="_cameras_f7id4_158",y={container:ds,scanner:hs,overlay:ms,corners:us,result:gs,details:vs,used:ps,item:xs,key:_s,value:fs,actions:ys,error:js,cameras:bs};class v{constructor(s,t,a,i,o){this._legacyCanvasSize=v.DEFAULT_CANVAS_SIZE,this._preferredCamera="environment",this._maxScansPerSecond=25,this._lastScanTimestamp=-1,this._destroyed=this._flashOn=this._paused=this._active=!1,this.$video=s,this.$canvas=document.createElement("canvas"),a&&typeof a=="object"?this._onDecode=t:(console.warn(a||i||o?"You're using a deprecated version of the QrScanner constructor which will be removed in the future":"Note that the type of the scan result passed to onDecode will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),this._legacyOnDecode=t),t=typeof a=="object"?a:{},this._onDecodeError=t.onDecodeError||(typeof a=="function"?a:this._onDecodeError),this._calculateScanRegion=t.calculateScanRegion||(typeof i=="function"?i:this._calculateScanRegion),this._preferredCamera=t.preferredCamera||o||this._preferredCamera,this._legacyCanvasSize=typeof a=="number"?a:typeof i=="number"?i:this._legacyCanvasSize,this._maxScansPerSecond=t.maxScansPerSecond||this._maxScansPerSecond,this._onPlay=this._onPlay.bind(this),this._onLoadedMetaData=this._onLoadedMetaData.bind(this),this._onVisibilityChange=this._onVisibilityChange.bind(this),this._updateOverlay=this._updateOverlay.bind(this),s.disablePictureInPicture=!0,s.playsInline=!0,s.muted=!0;let g=!1;if(s.hidden&&(s.hidden=!1,g=!0),document.body.contains(s)||(document.body.appendChild(s),g=!0),a=s.parentElement,t.highlightScanRegion||t.highlightCodeOutline){if(i=!!t.overlay,this.$overlay=t.overlay||document.createElement("div"),o=this.$overlay.style,o.position="absolute",o.display="none",o.pointerEvents="none",this.$overlay.classList.add("scan-region-highlight"),!i&&t.highlightScanRegion){this.$overlay.innerHTML='<svg class="scan-region-highlight-svg" viewBox="0 0 238 238" preserveAspectRatio="none" style="position:absolute;width:100%;height:100%;left:0;top:0;fill:none;stroke:#e9b213;stroke-width:4;stroke-linecap:round;stroke-linejoin:round"><path d="M31 2H10a8 8 0 0 0-8 8v21M207 2h21a8 8 0 0 1 8 8v21m0 176v21a8 8 0 0 1-8 8h-21m-176 0H10a8 8 0 0 1-8-8v-21"/></svg>';try{this.$overlay.firstElementChild.animate({transform:["scale(.98)","scale(1.01)"]},{duration:400,iterations:1/0,direction:"alternate",easing:"ease-in-out"})}catch{}a.insertBefore(this.$overlay,this.$video.nextSibling)}t.highlightCodeOutline&&(this.$overlay.insertAdjacentHTML("beforeend",'<svg class="code-outline-highlight" preserveAspectRatio="none" style="display:none;width:100%;height:100%;fill:none;stroke:#e9b213;stroke-width:5;stroke-dasharray:25;stroke-linecap:round;stroke-linejoin:round"><polygon/></svg>'),this.$codeOutlineHighlight=this.$overlay.lastElementChild)}this._scanRegion=this._calculateScanRegion(s),requestAnimationFrame(()=>{let l=window.getComputedStyle(s);l.display==="none"&&(s.style.setProperty("display","block","important"),g=!0),l.visibility!=="visible"&&(s.style.setProperty("visibility","visible","important"),g=!0),g&&(console.warn("QrScanner has overwritten the video hiding style to avoid Safari stopping the playback."),s.style.opacity="0",s.style.width="0",s.style.height="0",this.$overlay&&this.$overlay.parentElement&&this.$overlay.parentElement.removeChild(this.$overlay),delete this.$overlay,delete this.$codeOutlineHighlight),this.$overlay&&this._updateOverlay()}),s.addEventListener("play",this._onPlay),s.addEventListener("loadedmetadata",this._onLoadedMetaData),document.addEventListener("visibilitychange",this._onVisibilityChange),window.addEventListener("resize",this._updateOverlay),this._qrEnginePromise=v.createQrEngine()}static set WORKER_PATH(s){console.warn("Setting QrScanner.WORKER_PATH is not required and not supported anymore. Have a look at the README for new setup instructions.")}static async hasCamera(){try{return!!(await v.listCameras(!1)).length}catch{return!1}}static async listCameras(s=!1){if(!navigator.mediaDevices)return[];let t=async()=>(await navigator.mediaDevices.enumerateDevices()).filter(i=>i.kind==="videoinput"),a;try{s&&(await t()).every(i=>!i.label)&&(a=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}))}catch{}try{return(await t()).map((i,o)=>({id:i.deviceId,label:i.label||(o===0?"Default Camera":`Camera ${o+1}`)}))}finally{a&&(console.warn("Call listCameras after successfully starting a QR scanner to avoid creating a temporary video stream"),v._stopVideoStream(a))}}async hasFlash(){let s;try{if(this.$video.srcObject){if(!(this.$video.srcObject instanceof MediaStream))return!1;s=this.$video.srcObject}else s=(await this._getCameraStream()).stream;return"torch"in s.getVideoTracks()[0].getSettings()}catch{return!1}finally{s&&s!==this.$video.srcObject&&(console.warn("Call hasFlash after successfully starting the scanner to avoid creating a temporary video stream"),v._stopVideoStream(s))}}isFlashOn(){return this._flashOn}async toggleFlash(){this._flashOn?await this.turnFlashOff():await this.turnFlashOn()}async turnFlashOn(){if(!this._flashOn&&!this._destroyed&&(this._flashOn=!0,this._active&&!this._paused))try{if(!await this.hasFlash())throw"No flash available";await this.$video.srcObject.getVideoTracks()[0].applyConstraints({advanced:[{torch:!0}]})}catch(s){throw this._flashOn=!1,s}}async turnFlashOff(){this._flashOn&&(this._flashOn=!1,await this._restartVideoStream())}destroy(){this.$video.removeEventListener("loadedmetadata",this._onLoadedMetaData),this.$video.removeEventListener("play",this._onPlay),document.removeEventListener("visibilitychange",this._onVisibilityChange),window.removeEventListener("resize",this._updateOverlay),this._destroyed=!0,this._flashOn=!1,this.stop(),v._postWorkerMessage(this._qrEnginePromise,"close")}async start(){if(this._destroyed)throw Error("The QR scanner can not be started as it had been destroyed.");if((!this._active||this._paused)&&(window.location.protocol!=="https:"&&console.warn("The camera stream is only accessible if the page is transferred via https."),this._active=!0,!document.hidden))if(this._paused=!1,this.$video.srcObject)await this.$video.play();else try{let{stream:s,facingMode:t}=await this._getCameraStream();!this._active||this._paused?v._stopVideoStream(s):(this._setVideoMirror(t),this.$video.srcObject=s,await this.$video.play(),this._flashOn&&(this._flashOn=!1,this.turnFlashOn().catch(()=>{})))}catch(s){if(!this._paused)throw this._active=!1,s}}stop(){this.pause(),this._active=!1}async pause(s=!1){if(this._paused=!0,!this._active)return!0;this.$video.pause(),this.$overlay&&(this.$overlay.style.display="none");let t=()=>{this.$video.srcObject instanceof MediaStream&&(v._stopVideoStream(this.$video.srcObject),this.$video.srcObject=null)};return s?(t(),!0):(await new Promise(a=>setTimeout(a,300)),this._paused?(t(),!0):!1)}async setCamera(s){s!==this._preferredCamera&&(this._preferredCamera=s,await this._restartVideoStream())}static async scanImage(s,t,a,i,o=!1,g=!1){let l,h=!1;t&&("scanRegion"in t||"qrEngine"in t||"canvas"in t||"disallowCanvasResizing"in t||"alsoTryWithoutScanRegion"in t||"returnDetailedScanResult"in t)?(l=t.scanRegion,a=t.qrEngine,i=t.canvas,o=t.disallowCanvasResizing||!1,g=t.alsoTryWithoutScanRegion||!1,h=!0):console.warn(t||a||i||o||g?"You're using a deprecated api for scanImage which will be removed in the future.":"Note that the return type of scanImage will change in the future. To already switch to the new api today, you can pass returnDetailedScanResult: true."),t=!!a;try{let c,d;[a,c]=await Promise.all([a||v.createQrEngine(),v._loadImage(s)]),[i,d]=v._drawToCanvas(c,l,i,o);let r;if(a instanceof Worker){let n=a;t||v._postWorkerMessageSync(n,"inversionMode","both"),r=await new Promise((u,S)=>{let x,b,w,R=-1;b=k=>{k.data.id===R&&(n.removeEventListener("message",b),n.removeEventListener("error",w),clearTimeout(x),k.data.data!==null?u({data:k.data.data,cornerPoints:v._convertPoints(k.data.cornerPoints,l)}):S(v.NO_QR_CODE_FOUND))},w=k=>{n.removeEventListener("message",b),n.removeEventListener("error",w),clearTimeout(x),S("Scanner error: "+(k?k.message||k:"Unknown Error"))},n.addEventListener("message",b),n.addEventListener("error",w),x=setTimeout(()=>w("timeout"),1e4);let C=d.getImageData(0,0,i.width,i.height);R=v._postWorkerMessageSync(n,"decode",C,[C.data.buffer])})}else r=await Promise.race([new Promise((n,u)=>window.setTimeout(()=>u("Scanner error: timeout"),1e4)),(async()=>{try{var[n]=await a.detect(i);if(!n)throw v.NO_QR_CODE_FOUND;return{data:n.rawValue,cornerPoints:v._convertPoints(n.cornerPoints,l)}}catch(u){if(n=u.message||u,/not implemented|service unavailable/.test(n))return v._disableBarcodeDetector=!0,v.scanImage(s,{scanRegion:l,canvas:i,disallowCanvasResizing:o,alsoTryWithoutScanRegion:g});throw`Scanner error: ${n}`}})()]);return h?r:r.data}catch(c){if(!l||!g)throw c;let d=await v.scanImage(s,{qrEngine:a,canvas:i,disallowCanvasResizing:o});return h?d:d.data}finally{t||v._postWorkerMessage(a,"close")}}setGrayscaleWeights(s,t,a,i=!0){v._postWorkerMessage(this._qrEnginePromise,"grayscaleWeights",{red:s,green:t,blue:a,useIntegerApproximation:i})}setInversionMode(s){v._postWorkerMessage(this._qrEnginePromise,"inversionMode",s)}static async createQrEngine(s){if(s&&console.warn("Specifying a worker path is not required and not supported anymore."),s=()=>Ve(()=>import("./qr-scanner-worker.min-D85Z9gVD.js"),[]).then(a=>a.createWorker()),!(!v._disableBarcodeDetector&&"BarcodeDetector"in window&&BarcodeDetector.getSupportedFormats&&(await BarcodeDetector.getSupportedFormats()).includes("qr_code")))return s();let t=navigator.userAgentData;return t&&t.brands.some(({brand:a})=>/Chromium/i.test(a))&&/mac ?OS/i.test(t.platform)&&await t.getHighEntropyValues(["architecture","platformVersion"]).then(({architecture:a,platformVersion:i})=>/arm/i.test(a||"arm")&&13<=parseInt(i||"13")).catch(()=>!0)?s():new BarcodeDetector({formats:["qr_code"]})}_onPlay(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay(),this.$overlay&&(this.$overlay.style.display=""),this._scanFrame()}_onLoadedMetaData(){this._scanRegion=this._calculateScanRegion(this.$video),this._updateOverlay()}_onVisibilityChange(){document.hidden?this.pause():this._active&&this.start()}_calculateScanRegion(s){let t=Math.round(.6666666666666666*Math.min(s.videoWidth,s.videoHeight));return{x:Math.round((s.videoWidth-t)/2),y:Math.round((s.videoHeight-t)/2),width:t,height:t,downScaledWidth:this._legacyCanvasSize,downScaledHeight:this._legacyCanvasSize}}_updateOverlay(){requestAnimationFrame(()=>{if(this.$overlay){var s=this.$video,t=s.videoWidth,a=s.videoHeight,i=s.offsetWidth,o=s.offsetHeight,g=s.offsetLeft,l=s.offsetTop,h=window.getComputedStyle(s),c=h.objectFit,d=t/a,r=i/o;switch(c){case"none":var n=t,u=a;break;case"fill":n=i,u=o;break;default:(c==="cover"?d>r:d<r)?(u=o,n=u*d):(n=i,u=n/d),c==="scale-down"&&(n=Math.min(n,t),u=Math.min(u,a))}var[S,x]=h.objectPosition.split(" ").map((w,R)=>{const C=parseFloat(w);return w.endsWith("%")?(R?o-u:i-n)*C/100:C});h=this._scanRegion.width||t,r=this._scanRegion.height||a,c=this._scanRegion.x||0;var b=this._scanRegion.y||0;d=this.$overlay.style,d.width=`${h/t*n}px`,d.height=`${r/a*u}px`,d.top=`${l+x+b/a*u}px`,a=/scaleX\(-1\)/.test(s.style.transform),d.left=`${g+(a?i-S-n:S)+(a?t-c-h:c)/t*n}px`,d.transform=s.style.transform}})}static _convertPoints(s,t){if(!t)return s;let a=t.x||0,i=t.y||0,o=t.width&&t.downScaledWidth?t.width/t.downScaledWidth:1;t=t.height&&t.downScaledHeight?t.height/t.downScaledHeight:1;for(let g of s)g.x=g.x*o+a,g.y=g.y*t+i;return s}_scanFrame(){!this._active||this.$video.paused||this.$video.ended||("requestVideoFrameCallback"in this.$video?this.$video.requestVideoFrameCallback.bind(this.$video):requestAnimationFrame)(async()=>{if(!(1>=this.$video.readyState)){var s=Date.now()-this._lastScanTimestamp,t=1e3/this._maxScansPerSecond;s<t&&await new Promise(i=>setTimeout(i,t-s)),this._lastScanTimestamp=Date.now();try{var a=await v.scanImage(this.$video,{scanRegion:this._scanRegion,qrEngine:this._qrEnginePromise,canvas:this.$canvas})}catch(i){if(!this._active)return;this._onDecodeError(i)}!v._disableBarcodeDetector||await this._qrEnginePromise instanceof Worker||(this._qrEnginePromise=v.createQrEngine()),a?(this._onDecode?this._onDecode(a):this._legacyOnDecode&&this._legacyOnDecode(a.data),this.$codeOutlineHighlight&&(clearTimeout(this._codeOutlineHighlightRemovalTimeout),this._codeOutlineHighlightRemovalTimeout=void 0,this.$codeOutlineHighlight.setAttribute("viewBox",`${this._scanRegion.x||0} ${this._scanRegion.y||0} ${this._scanRegion.width||this.$video.videoWidth} ${this._scanRegion.height||this.$video.videoHeight}`),this.$codeOutlineHighlight.firstElementChild.setAttribute("points",a.cornerPoints.map(({x:i,y:o})=>`${i},${o}`).join(" ")),this.$codeOutlineHighlight.style.display="")):this.$codeOutlineHighlight&&!this._codeOutlineHighlightRemovalTimeout&&(this._codeOutlineHighlightRemovalTimeout=setTimeout(()=>this.$codeOutlineHighlight.style.display="none",100))}this._scanFrame()})}_onDecodeError(s){s!==v.NO_QR_CODE_FOUND&&console.log(s)}async _getCameraStream(){if(!navigator.mediaDevices)throw"Camera not found.";let s=/^(environment|user)$/.test(this._preferredCamera)?"facingMode":"deviceId",t=[{width:{min:1024}},{width:{min:768}},{}],a=t.map(i=>Object.assign({},i,{[s]:{exact:this._preferredCamera}}));for(let i of[...a,...t])try{let o=await navigator.mediaDevices.getUserMedia({video:i,audio:!1}),g=this._getFacingMode(o)||(i.facingMode?this._preferredCamera:this._preferredCamera==="environment"?"user":"environment");return{stream:o,facingMode:g}}catch{}throw"Camera not found."}async _restartVideoStream(){let s=this._paused;await this.pause(!0)&&!s&&this._active&&await this.start()}static _stopVideoStream(s){for(let t of s.getTracks())t.stop(),s.removeTrack(t)}_setVideoMirror(s){this.$video.style.transform="scaleX("+(s==="user"?-1:1)+")"}_getFacingMode(s){return(s=s.getVideoTracks()[0])?/rear|back|environment/i.test(s.label)?"environment":/front|user|face/i.test(s.label)?"user":null:null}static _drawToCanvas(s,t,a,i=!1){a=a||document.createElement("canvas");let o=t&&t.x?t.x:0,g=t&&t.y?t.y:0,l=t&&t.width?t.width:s.videoWidth||s.width,h=t&&t.height?t.height:s.videoHeight||s.height;return i||(i=t&&t.downScaledWidth?t.downScaledWidth:l,t=t&&t.downScaledHeight?t.downScaledHeight:h,a.width!==i&&(a.width=i),a.height!==t&&(a.height=t)),t=a.getContext("2d",{alpha:!1}),t.imageSmoothingEnabled=!1,t.drawImage(s,o,g,l,h,0,0,a.width,a.height),[a,t]}static async _loadImage(s){if(s instanceof Image)return await v._awaitImageLoad(s),s;if(s instanceof HTMLVideoElement||s instanceof HTMLCanvasElement||s instanceof SVGImageElement||"OffscreenCanvas"in window&&s instanceof OffscreenCanvas||"ImageBitmap"in window&&s instanceof ImageBitmap)return s;if(s instanceof File||s instanceof Blob||s instanceof URL||typeof s=="string"){let t=new Image;t.src=s instanceof File||s instanceof Blob?URL.createObjectURL(s):s.toString();try{return await v._awaitImageLoad(t),t}finally{(s instanceof File||s instanceof Blob)&&URL.revokeObjectURL(t.src)}}else throw"Unsupported image type."}static async _awaitImageLoad(s){s.complete&&s.naturalWidth!==0||await new Promise((t,a)=>{let i=o=>{s.removeEventListener("load",i),s.removeEventListener("error",i),o instanceof ErrorEvent?a("Image load error"):t()};s.addEventListener("load",i),s.addEventListener("error",i)})}static async _postWorkerMessage(s,t,a,i){return v._postWorkerMessageSync(await s,t,a,i)}static _postWorkerMessageSync(s,t,a,i){if(!(s instanceof Worker))return-1;let o=v._workerMessageId++;return s.postMessage({id:o,type:t,data:a},i),o}}v.DEFAULT_CANVAS_SIZE=400;v.NO_QR_CODE_FOUND="No QR code found";v._disableBarcodeDetector=!1;v._workerMessageId=0;const ws=()=>{var P,W,K,X,Z,ee,te,se,ae,ie;const m=j.useRef(null),[s,t]=j.useState(null),[a,i]=j.useState(null),[o,g]=j.useState([]),[l,h]=j.useState(null),[c,d]=j.useState(""),{data:{entryPass:r}={},isLoading:n,error:u}=Le(s==null?void 0:s._id),[S,{isLoading:x,error:b}]=qe();j.useEffect(()=>{var V;(V=v==null?void 0:v.listCameras())==null||V.then($=>{g($)});const N=new v(m.current,$=>{t(Pe($==null?void 0:$.data)),N.stop()},{maxScansPerSecond:2});return i(N),()=>{N.stop(),N.destroy()}},[]);const w=N=>{a==null||a.setCamera(N.id)},R=()=>{t(null),h(null),a==null||a.start()},C=N=>{N.preventDefault(),c.trim()&&t({_id:c.trim()})},k=()=>{a==null||a.stop()},A=async()=>{var N,V;try{await S(r==null?void 0:r._id).unwrap(),O.success("Checked In Successfully"),t(null)}catch($){O.error(((N=$==null?void 0:$.data)==null?void 0:N.message)||"Something went wrong"),h(((V=$==null?void 0:$.data)==null?void 0:V.message)||"Something went wrong")}};return e.jsxs("div",{className:y.container,children:[e.jsxs("form",{onSubmit:C,className:y.manualForm,style:{marginBottom:16},children:[e.jsx("input",{type:"text",value:c,onChange:N=>d(N.target.value),placeholder:"Enter Entry Pass ID manually",className:y.manualInput,style:{padding:"6px 12px",borderRadius:4,border:"1px solid #ccc",marginRight:8}}),e.jsx("button",{type:"submit",style:{padding:"6px 16px",borderRadius:4,background:"#6c63ff",color:"#fff",border:"none"},children:"Fetch"})]}),e.jsxs("div",{className:y.scanner,children:[e.jsx("video",{className:y.video,ref:m}),e.jsx("div",{className:y.overlay,children:!s&&e.jsx("div",{className:y.corners})}),s&&e.jsxs("div",{className:y.result,children:[u&&e.jsx("div",{className:y.error,children:(P=u==null?void 0:u.data)==null?void 0:P.message}),l&&e.jsx("div",{className:y.error,children:l}),n&&e.jsx("div",{className:y.loading,children:"Loading..."}),!n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:y.details,children:[(r==null?void 0:r.isUsed)&&e.jsx("div",{className:y.used,children:"Already Used"}),e.jsxs("div",{className:y.userProfilePopup,style:{maxWidth:"600px",margin:"0 auto",padding:"5px",background:"#fff",fontSize:"14px",color:"#333"},children:[e.jsx("img",{src:(W=r==null?void 0:r.user)==null?void 0:W.image,alt:(K=r==null?void 0:r.user)==null?void 0:K.name,className:y.profileImage,style:{width:100,height:100,borderRadius:"50%",objectFit:"cover",marginBottom:8}}),e.jsx("a",{href:`${(X=r==null?void 0:r.user)==null?void 0:X.image}`,target:"_blank",rel:"noopener noreferrer",className:y.openProfileBtn,style:{display:"inline-block",marginTop:8,padding:"4px 12px",background:"#6c63ff",color:"#fff",borderRadius:4,textDecoration:"none"},children:"Open Full Profile"}),e.jsxs("div",{className:y.profileInfo,children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",(Z=r==null?void 0:r.user)==null?void 0:Z.name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Email:"})," ",(ee=r==null?void 0:r.user)==null?void 0:ee.email]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Gender:"})," ",(te=r==null?void 0:r.user)==null?void 0:te.gender]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Mobile:"})," ",(se=r==null?void 0:r.user)==null?void 0:se.mobile]})]})]}),e.jsxs("div",{className:y.item,children:[e.jsx("p",{className:y.key,children:"Entry Id"}),e.jsx("p",{className:y.value,children:r==null?void 0:r._id})]}),e.jsxs("div",{className:y.item,children:[e.jsx("p",{className:y.key,children:"Event Name"}),e.jsx("p",{className:y.key,children:(ae=r==null?void 0:r.event)==null?void 0:ae.name})]}),e.jsxs("div",{className:y.item,children:[e.jsx("p",{className:y.key,children:"Used At"}),e.jsx("p",{className:y.value,children:he(r==null?void 0:r.usedAt)})]})]}),e.jsx("div",{className:y.actions,children:e.jsx("button",{disabled:r==null?void 0:r.isUsed,onClick:A,children:x||n?"Loading...":r!=null&&r.isUsed?"Already Used":"Check In"})})]})]})]}),e.jsxs("div",{className:y.actions,children:[e.jsx("button",{onClick:R,children:"Start"}),e.jsx("button",{onClick:k,children:"Stop"})]}),e.jsx("select",{className:y.cameras,onChange:N=>{const V=o.find($=>$.label===N.target.value);w(V)},defaultValue:(ie=a==null?void 0:a.camera)==null?void 0:ie.label,children:o.map(N=>e.jsx("option",{className:y.camera,children:N.label},N.id))})]})},Ss=({defaultValue:m={},onSubmit:s,onChange:t})=>{var n;const[a,i]=j.useState({title:"",body:"",topics:[],...m||{}}),[o,g]=j.useState(!1),l="{ events [{ _id, name }] }",{data:{events:h=[]}={}}=Me(l),c=(u,S)=>{i({...a,[u]:S}),t instanceof Function&&t({...a,[u]:S})},d=u=>{g(u)},r=u=>{u.preventDefault(),o&&s instanceof Function&&s(a)};return e.jsx("form",{onSubmit:r,children:e.jsxs(z,{columns:12,children:[e.jsx(_,{sm:12,md:6,lg:4,children:e.jsx(f.Text,{label:"Title",validations:{required:!0},onValidation:d,onChange:u=>c("title",u),defaultValue:a.title})}),e.jsx(_,{sm:12,md:6,lg:4,children:e.jsx(f.Text,{label:"Body",validations:{required:!0},onValidation:d,onChange:u=>c("body",u),defaultValue:a.message})}),e.jsx(_,{sm:12,md:12,lg:12,children:e.jsx(f.CheckBoxes,{label:"Events",entries:(h==null?void 0:h.map(({name:u})=>u))||[],validations:{minCount:1},onValidation:d,onChange:u=>c("topics",u==null?void 0:u.map(S=>{var x;return(x=h==null?void 0:h.find(b=>b.name===S))==null?void 0:x._id})),defaultValue:(n=a==null?void 0:a.topics)==null?void 0:n.map(u=>{var S;return{[(S=h==null?void 0:h.find(x=>x._id===u))==null?void 0:S.name]:!0}})})}),e.jsx(_,{sm:12,md:12,lg:12,children:e.jsx("button",{className:"flex justify-center items-center w-full h-10 bg-primary text-white rounded-md cursor-pointer transition-colors hover:bg-primary/90",type:"submit",children:"Submit"})})]})})},Es=()=>{const[m]=Fe(),s=async t=>{var a;try{console.log(t),await m({topics:t.topics,notification:{title:t.title,body:t.body}}).unwrap(),O.success("Notification sent successfully")}catch(i){O.error(((a=i==null?void 0:i.data)==null?void 0:a.message)||(i==null?void 0:i.message)||"Something went wrong")}};return e.jsx("div",{className:"p-4 overflow-auto",children:e.jsx(I,{children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"font-medium text-[var(--color-text-admin)]",children:"Notifications"}),e.jsx("p",{className:"text-sm text-[var(--color-text-light-admin)]",children:"Create and manage notifications"})]}),e.jsx(Ss,{onSubmit:s,onChange:t=>console.log(t)})]})})})},Ns=()=>e.jsxs("div",{className:ne.layout,children:[e.jsx(Ke,{}),e.jsxs("div",{className:ne.content,children:[e.jsx(gt,{}),e.jsxs(ue,{children:[e.jsx(T,{path:"/",element:e.jsx(bt,{})}),e.jsx(T,{path:"/events/*",element:e.jsx(cs,{})}),e.jsx(T,{path:"/scanner",element:e.jsx(ws,{})}),e.jsx(T,{path:"/notifications/*",element:e.jsx(Es,{})})]})]})]}),ks=()=>e.jsx(He,{children:e.jsx(Xt,{children:e.jsx(Ns,{})})});export{ks as default};
